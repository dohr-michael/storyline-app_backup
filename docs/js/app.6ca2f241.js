(function(t){function e(e){for(var o,r,s=e[0],c=e[1],u=e[2],d=0,l=[];d<s.length;d++)r=s[d],a[r]&&l.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);f&&f(e);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},a={app:0},i=[];function s(t){return c.p+"js/"+({about:"about",characters:"characters"}[t]||t)+"."+{about:"e9a0cf3b",characters:"eb072508"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={characters:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise(function(e,n){for(var o="css/"+({about:"about",characters:"characters"}[t]||t)+"."+{about:"31d6cfe0",characters:"0e433876"}[t]+".css",a=c.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===o||d===a))return e()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===o||d===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.request=o,delete r[t],f.parentNode.removeChild(f),n(i)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){r[t]=0}));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var i=new Promise(function(e,n){o=a[t]=[e,n]});e.push(o[2]=i);var u,d=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t),u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+o+": "+r+")");i.type=o,i.request=r,n[1](i)}a[t]=void 0}};var f=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,d.appendChild(l)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var f=d;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1199:function(t,e,n){"use strict";var o=n("be94"),r={apiPrefix:"http://localhost:3000"},a=n("e13c"),i=Object(o["a"])({},a["a"].api("".concat(r.apiPrefix,"/characters")));n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u});var s={items:[]},c="characters",u={state:s,getters:{items:function(t){return t.items}},mutations:{searched:function(t,e){t.items=e}},actions:{search:function(t,e){var n=t.commit;i.findMany(e||null).subscribe(function(t){n("searched",t.items)})}}}},"28b7":function(t,e,n){"use strict";var o=n("9baf"),r=n.n(o);r.a},"30f4":function(t,e,n){},"427e":function(t,e,n){},"444f":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var o=n("5e27"),r=n.n(o);r.a},"5e27":function(t,e,n){},8709:function(t,e,n){"use strict";var o=n("427e"),r=n.n(o);r.a},"9baf":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v("\n        |\n        "),n("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),n("router-view")],1)},a=[],i=(n("5c0b"),n("2877")),s={},c=Object(i["a"])(s,r,a,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,d=n("8c4f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loaded?n("GraphComponent",{attrs:{nodes:t.nodes,edges:t.edges}}):t._e()],1)},f=[],p=n("be94"),b=n("d4ec"),h=n("bee2"),v=n("99de"),m=n("7e84"),g=n("262e"),y=n("9ab4"),j=n("60a3"),O=n("2f62"),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{ref:"svg",attrs:{width:t.viewportWidth,height:t.viewportHeight}},[n("rect",{ref:"zoom",staticClass:"zoom",attrs:{x:"0",y:"0",width:t.viewportWidth,height:t.viewportHeight}}),n("g",{ref:"graph-content"},[n("g",t._l(t.linkDatums,function(e){return e.source&&e.target?n("GraphLink",{attrs:{point1:t.getPoint(e.source),point2:t.getPoint(e.target),nodeRadius:t.nodeRadius,edges:e.relations,biDirectional:e.biDirectional}}):t._e()}),1),n("g",t._l(t.nodeDatums,function(e){return n("GraphNode",{key:""+e.nodeId,attrs:{point:t.getPoint(e),node:e,nodeRadius:t.nodeRadius}})}),1)])])},_=[],k=(n("7514"),n("2909")),w=n("53ca"),P=n("5698"),R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t.biDirectional?t._e():n("line",{staticClass:"link",attrs:{x1:t.p1.x,y1:t.p1.y,x2:t.p2.x,y2:t.p2.y}}),t.biDirectional?n("path",{staticClass:"link",attrs:{d:t.linePath()}}):t._e(),n("path",{staticClass:"arrow",attrs:{d:"M-10,-5L0,0L-10,5",transform:t.arrowTransform()}})])},C=[],T=n("aabe"),D=n("e13c"),S=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(v["a"])(this,Object(m["a"])(e).apply(this,arguments)),t.p1={x:0,y:0},t.p2={x:0,y:0},t}return Object(g["a"])(e,t),Object(h["a"])(e,[{key:"updatePositions",value:function(){var t={center:this.point1,radius:this.nodeRadius},e={center:this.point2,radius:this.nodeRadius};this.p1=D["b"].intercetionFromCenterToPoint(t,this.point2),this.p2=D["b"].intercetionFromCenterToPoint(e,this.point1)}},{key:"linePath",value:function(){var t=this.p2.x-this.p1.x,e=this.p2.y-this.p1.y,n=Math.sqrt(t*t+e*e);return"M"+this.p1.x+","+this.p1.y+"A"+n+","+n+" 0 0,1 "+this.p2.x+","+this.p2.y}},{key:"arrowTransform",value:function(){var t=D["b"].getAlpha(this.p1,this.p2)+(this.biDirectional?Math.PI/10:0),e=T["multiply"](D["b"].Transformation.translation(this.p2.x,this.p2.y),D["b"].Transformation.rotation(t));return"matrix(".concat(D["b"].Transformation.stringify(e),")")}}]),e}(o["default"]);y["a"]([Object(j["b"])({required:!0})],S.prototype,"point1",void 0),y["a"]([Object(j["b"])({required:!0})],S.prototype,"point2",void 0),y["a"]([Object(j["b"])({required:!0})],S.prototype,"edges",void 0),y["a"]([Object(j["b"])({required:!0})],S.prototype,"nodeRadius",void 0),y["a"]([Object(j["b"])({required:!0})],S.prototype,"biDirectional",void 0),y["a"]([Object(j["c"])("point1.x"),Object(j["c"])("point1.y"),Object(j["c"])("point2.x"),Object(j["c"])("point2.y"),Object(j["c"])("nodeRadius")],S.prototype,"updatePositions",null),S=y["a"]([Object(j["a"])({name:"GraphLink",components:{}})],S);var M=S,N=M,I=(n("28b7"),Object(i["a"])(N,R,C,!1,null,"2cae5420",null));I.options.__file="GraphLink.vue";var E=I.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{transform:"translate("+t.point.x+" "+t.point.y+")"}},[n("circle",{class:t.node.kind+" node",attrs:{cx:"0",cy:"0",r:t.nodeRadius}}),n("foreignObject",{attrs:{transform:"translate("+-t.nodeRadius+" "+-t.nodeRadius+")"}},[n("div",{class:t.node.kind+" label",style:{width:2*t.nodeRadius+"px",height:2*t.nodeRadius+"px"}},[n("span",{staticClass:"text"},[t._v(t._s(t.node.name))])])])],1)},G=[],A=function(t){function e(){return Object(b["a"])(this,e),Object(v["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(o["default"]);y["a"]([Object(j["b"])({required:!0})],A.prototype,"point",void 0),y["a"]([Object(j["b"])({required:!0})],A.prototype,"node",void 0),y["a"]([Object(j["b"])({required:!0})],A.prototype,"nodeRadius",void 0),A=y["a"]([Object(j["a"])({name:"GraphNode",components:{}})],A);var $=A,L=$,z=(n("e465"),Object(i["a"])(L,q,G,!1,null,"7446d7c0",null));z.options.__file="GraphNode.vue";var B=z.exports,F=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(v["a"])(this,Object(m["a"])(e).apply(this,arguments)),t.nodeDatums=[],t.linkDatums=[],t}return Object(g["a"])(e,t),Object(h["a"])(e,[{key:"getPoint",value:function(t){return"object"===Object(w["a"])(t)?{x:t.x||0,y:t.y||0}:{x:0,y:0}}},{key:"onTick",value:function(){this.simulation&&(this.nodeDatums=Object(k["a"])(this.simulation.nodes()))}},{key:"onZoom",value:function(){this.contentSelection&&this.contentSelection.attr("transform",P["b"].transform)}},{key:"dragSubject",value:function(){if(this.simulation&&P["b"])return this.simulation.find(P["b"].x,P["b"].y,this.nodeRadius)}},{key:"dragStarted",value:function(){P["b"]&&P["b"].subject&&this.simulation&&(P["b"].active||this.simulation.alphaTarget(.3).restart(),P["b"].subject.fx=P["b"].subject.x,P["b"].subject.fy=P["b"].subject.y)}},{key:"dragged",value:function(){P["b"]&&P["b"].subject&&(P["b"].subject.fx=P["b"].x,P["b"].subject.fy=P["b"].y)}},{key:"dragEnded",value:function(){P["b"]&&P["b"].subject&&this.simulation&&(P["b"].active||this.simulation.alphaTarget(0),P["b"].subject.fx=null,P["b"].subject.fy=null)}},{key:"updateData",value:function(t,e){this.nodeDatums=t.map(function(t){return Object(p["a"])({},t)});var n=e.reduce(function(t,e){var n=e.from.nodeId+"_"+e.to.nodeId,o=e.to.nodeId+"_"+e.from.nodeId;if(t.ref[n])t.ref[n].relations.push(e);else{var r={source:e.from.nodeId,target:e.to.nodeId,relations:[e],biDirectional:!1};t.ref[n]=r,t.items.push(r)}return t.ref[o]&&(t.ref[n].biDirectional=!0,t.ref[o].biDirectional=!0),t},{ref:{},items:[]}),o=n.items;this.linkDatums=o,this.simulation&&this.simulation.stop(),this.simulation=P["g"](this.nodeDatums).force("link",P["e"](this.linkDatums).id(function(t){return t.nodeId}).distance(5*this.nodeRadius).strength(1)).force("charge",P["f"]().strength(-1)).force("collide",P["d"](this.nodeRadius+10)).force("center",P["c"](this.viewportWidth/2,this.viewportHeight/2)).on("tick",this.onTick)}},{key:"nodesChange",value:function(t){this.updateData(t,this.edges)}},{key:"edgesChange",value:function(t){this.updateData(this.nodes,t)}},{key:"mounted",value:function(){this.contentSelection=P["h"](this.$refs["graph-content"]);var t=P["i"]().scaleExtent([.1,4]).on("zoom",this.onZoom),e=P["a"]().container(this.$refs["graph-content"]).subject(this.dragSubject).on("start",this.dragStarted).on("drag",this.dragged).on("end",this.dragEnded);this.updateData(this.nodes,this.edges),this.contentSelection.call(e),P["h"](this.$refs["zoom"]).call(t)}},{key:"destroyed",value:function(){console.log("Graph -> destroyed"),this.simulation&&this.simulation.stop()}}]),e}(o["default"]);y["a"]([Object(j["b"])({default:1024})],F.prototype,"viewportWidth",void 0),y["a"]([Object(j["b"])({default:400})],F.prototype,"viewportHeight",void 0),y["a"]([Object(j["b"])({required:!0})],F.prototype,"nodes",void 0),y["a"]([Object(j["b"])({required:!0})],F.prototype,"edges",void 0),y["a"]([Object(j["b"])({default:40})],F.prototype,"nodeRadius",void 0),y["a"]([Object(j["c"])("nodes")],F.prototype,"nodesChange",null),y["a"]([Object(j["c"])("edges")],F.prototype,"edgesChange",null),F=y["a"]([Object(j["a"])({name:"Graph",components:{GraphNode:B,GraphLink:E}})],F);var H=F,J=H,U=(n("df1e"),Object(i["a"])(J,x,_,!1,null,"6c0be977",null));U.options.__file="Graph.vue";var W=U.exports,Z=(n("7f7f"),n("f751"),n("17f5")),K=n("bee6"),V=0;function Y(t,e){var n=""+ ++V;return Object.assign({id:n,kind:e,nodeId:e+"/"+n},{name:t})}function Q(t){return Y(t,"Characters")}function X(t){return Y(t,"Places")}function tt(t){return Y(t,"Organizations")}function et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{from:t,to:e,labels:n}}var nt=Q("Luke Skywalker"),ot=Q("Darth Vader"),rt=Q("Yoda"),at=Q("Obiwan Kenobi"),it=X("Tatooin"),st=X("Death Start"),ct=tt("Jedi"),ut=tt("Sith"),dt=[nt,ot,rt,at,it,st,ct,ut],lt=[et(ot,nt,["is_father_of"]),et(rt,nt,["is_master_of"]),et(at,nt,["is_master_of"]),et(at,ot,["was_master_of"]),et(ot,at,["is_rival_of"]),et(ot,it,["was_born_on"]),et(ot,nt,["was_born_on"]),et(nt,st,["has_destroy"]),et(ot,st,["is_captain_of"]),et(ot,ct,["was"]),et(ot,ut,["is"]),et(rt,ct,["is"]),et(at,ct,["is"]),et(nt,ct,["is"])],ft={findGraph:function(){return Object(Z["a"])({nodes:dt,edges:lt}).pipe(Object(K["a"])(1e3))},addNode:function(t){return Object(Z["a"])(Y(t.name,t.kind))},addRelation:function(t){return Object(Z["a"])()},removeRelation:function(t){return Object(Z["a"])()}},pt={loaded:!1,nodes:[],edges:[]},bt="relationships",ht={state:pt,mutations:{nodeCreated:function(t,e){t.nodes=Object(k["a"])(t.nodes).concat([e])},loaded:function(t,e){t.edges=e.edges,t.nodes=e.nodes,t.loaded=!0}},actions:{load:function(t){var e=t.commit;ft.findGraph().subscribe(function(t){e("loaded",t)})},createNode:function(t,e){var n=t.commit;ft.addNode(e).subscribe(function(t){n("nodeCreated",t)})}}},vt=Object(O["a"])(bt),mt=vt.mapState,gt=(vt.mapActions,function(t){function e(){return Object(b["a"])(this,e),Object(v["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(h["a"])(e,[{key:"mounted",value:function(){this.$store.dispatch("".concat(bt,"/load"))}},{key:"addNode",value:function(t){this.$store.dispatch("".concat(bt,"/createNode"),{name:"toto",kind:"Characters"})}}]),e}(o["default"]));gt=y["a"]([Object(j["a"])({name:"RelationshipsPage",components:{GraphComponent:W},computed:Object(p["a"])({},mt({nodes:"nodes",edges:"edges",loaded:"loaded"}))})],gt);var yt=gt,jt=yt,Ot=(n("8709"),Object(i["a"])(jt,l,f,!1,null,"22c910b7",null));Ot.options.__file="RelationshipsPage.vue";var xt=Ot.exports;o["default"].use(d["a"]);var _t,kt=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"relationships",component:xt},{path:"/characters",name:"characters",component:function(){return n.e("characters").then(n.bind(null,"699d"))}},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),wt=n("ade3"),Pt=n("1199");o["default"].use(O["b"]);var Rt=new O["b"].Store({state:{},mutations:{},actions:{},modules:(_t={},Object(wt["a"])(_t,Pt["a"],Object(p["a"])({namespaced:!0},Pt["b"])),Object(wt["a"])(_t,bt,Object(p["a"])({namespaced:!0},ht)),_t)}),Ct=n("9483");Object(Ct["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),o["default"].config.productionTip=!1,new o["default"]({router:kt,store:Rt,render:function(t){return t(u)}}).$mount("#app")},df1e:function(t,e,n){"use strict";var o=n("444f"),r=n.n(o);r.a},e13c:function(t,e,n){"use strict";var o={};n.r(o),n.d(o,"api",function(){return c});var r={};n.r(r),n.d(r,"Transformation",function(){return u}),n.d(r,"toLine",function(){return l}),n.d(r,"getAlpha",function(){return f}),n.d(r,"intercetionFromCenterToPoint",function(){return p});n("cadf"),n("551c"),n("097d");var a=n("be94"),i=n("2bd2"),s=n("5929");function c(t,e){return{findOne:function(n){var o=new i["a"];return s["a"].get("".concat(t,"/").concat(encodeURI(n))).subscribe(function(t){t.status>=400?o.error({code:t.status,data:t.response}):o.next(e?e(t.response):t.response)},function(t){o.error({code:500,data:t})}),o.asObservable()},findMany:function(n){var o=new i["a"];return s["a"].get("".concat(t,"?query=").concat(encodeURI(n||""))).subscribe(function(t){if(t.status>=400)o.error({code:t.status,data:t.response});else{var n=t.response||{};o.next(Object(a["a"])({},n,{items:e?(n.items||[]).map(e):n.items||[]}))}},function(t){o.error({code:500,data:t})}),o.asObservable()},create:function(n){var o=new i["a"];return s["a"].post("".concat(t),JSON.stringify(n),{"Content-Type":"application/json"}).subscribe(function(t){t.status>=400?o.error({code:t.status,data:t.response}):o.next(e?e(t.response):t.response)},function(t){o.error({code:500,data:t})}),o.asObservable()},update:function(n,o){var r=new i["a"];return s["a"].put("".concat(t,"/").concat(encodeURI(n)),JSON.stringify(o),{"Content-Type":"application/json"}).subscribe(function(t){t.status>=400?r.error({code:t.status,data:t.response}):r.next(e?e(t.response):t.response)},function(t){r.error({code:500,data:t})}),r.asObservable()},delete:function(e){var n=new i["a"];return s["a"].delete("".concat(t,"/").concat(encodeURI(e))).subscribe(function(t){t.status>=400?n.error({code:t.status,data:t.response}):n.next()}),n.asObservable()}}}var u,d=n("aabe");function l(t,e){var n=t.x===e.x?0:(e.y-t.y)/(e.x-t.x),o=t.y-n*t.x;return{a:n,b:o}}function f(t,e){var n=e.x-t.x,o=e.y-t.y,r=0;return n>0&&o>=0?r=Math.atan(o/n):n>0&&o<0?r=Math.atan(o/n)+2*Math.PI:n<0?r=Math.atan(o/n)+Math.PI:0===n&&o>0?r=Math.PI/2:0===n&&o<0&&(r=3*Math.PI/2),r}function p(t,e){var n=f(t.center,e);return{x:t.center.x+t.radius*Math.cos(n),y:t.center.y+t.radius*Math.sin(n)}}(function(t){function e(t,e){return d["matrix"]([[1,0,t],[0,1,e],[0,0,1]])}function n(t,e){return d["matrix"]([[t,0,0],[0,e,0],[0,0,1]])}function o(t){var e=d["cos"](t),n=d["sin"](t);return d["matrix"]([[e,-n,0],[n,e,0],[0,0,1]])}function r(t){return"".concat(t.get([0,0])," ").concat(t.get([1,0])," ").concat(t.get([0,1])," ").concat(t.get([1,1])," ").concat(t.get([0,2])," ").concat(t.get([1,2]))}t.translation=e,t.scale=n,t.rotation=o,t.stringify=r})(u||(u={})),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r})},e465:function(t,e,n){"use strict";var o=n("30f4"),r=n.n(o);r.a}});
//# sourceMappingURL=app.6ca2f241.js.map